<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>CHINTHAGINJALA SOHIL SUBRAMANYAM // SYSTEM_ROOT</title>
    <meta name="description" content="Sohil Subramanyam: Security-Focused Full-Stack Developer.">
    
    <style>
        /* --- CORE SYSTEM VARIABLES --- */
        :root {
            --bg-color: #02040a;
            --grid-color: rgba(255, 255, 255, 0.03);
            --text-main: #e0e0e0;
            --text-muted: #888;
            --accent: #00f0ff; 
            --accent-dim: rgba(0, 240, 255, 0.15);
            --danger: #ff2a2a;
            --font-mono: 'Courier New', Courier, monospace;
            --font-sans: 'Segoe UI', Roboto, Helvetica, sans-serif;
            --cursor-size: 16px; 
            
            /* HEXAGON SIZE */
            --node-width: 160px; 
            --node-height: 140px; 
            --hex-depth: 40px; 
        }

        /* --- RESET & BASE --- */
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            cursor: none; 
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-main);
            font-family: var(--font-mono);
            overflow: hidden; 
            height: 100vh;
            width: 100vw;
            user-select: none;
            perspective: 1000px;
            perspective-origin: center center;
        }

        /* --- ENTRY SCREEN LAYERS --- */
        #entry-screen {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: #000;
            z-index: 50000; /* High but below cursor */
            display: flex;
            justify-content: center;
            align-items: center;
            transition: opacity 1s ease-out;
        }

        #entry-canvas {
            position: absolute;
            top: 0; left: 0; width: 100%; height: 100%;
            z-index: 0;
            opacity: 0.5;
        }

        /* PHASE 1: INTRO TEXT */
        #phase-intro {
            position: absolute;
            z-index: 5;
            text-align: center;
            opacity: 1;
            transition: opacity 0.5s;
        }

        .intro-quote {
            font-family: var(--font-mono);
            color: var(--danger); /* Reddish */
            font-size: 24px;
            letter-spacing: 2px;
            text-shadow: 0 0 10px var(--danger);
            animation: pulseText 2s infinite;
        }

        @keyframes pulseText {
            0%, 100% { opacity: 0.8; }
            50% { opacity: 1; text-shadow: 0 0 20px var(--danger); }
        }

        /* PHASE 2: SECURITY FORM */
        #phase-form {
            display: none; /* Hidden initially */
            position: relative;
            z-index: 10;
            opacity: 0;
            transition: opacity 0.5s;
        }

        .entry-modal {
            width: 420px;
            background: rgba(5, 0, 0, 0.95);
            border: 1px solid var(--danger);
            box-shadow: 0 0 30px rgba(255, 42, 42, 0.1);
            padding: 2px;
        }

        .terminal-header {
            background: rgba(255, 42, 42, 0.15);
            color: var(--danger);
            font-size: 11px;
            padding: 10px 15px;
            letter-spacing: 2px;
            border-bottom: 1px solid var(--danger);
            font-weight: bold;
            text-transform: uppercase;
        }

        .entry-content {
            padding: 30px;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }

        .input-group {
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .input-group label {
            font-size: 10px;
            color: #888;
            letter-spacing: 1px;
            text-transform: uppercase;
        }

        .input-group input, .input-group select {
            background: transparent;
            border: none;
            border-bottom: 1px solid #333;
            color: #fff;
            font-family: var(--font-mono);
            font-size: 14px;
            padding: 8px 0;
            outline: none;
            transition: border-color 0.3s;
            border-radius: 0;
            cursor: text;
        }

        .input-group select { cursor: pointer; }
        .input-group select option { background: #000; color: #fff; }
        .input-group input:focus, .input-group select:focus { border-bottom-color: var(--danger); }

        .entry-btn {
            margin-top: 15px;
            background: transparent;
            border: 1px solid var(--danger);
            color: var(--danger);
            padding: 12px;
            font-family: var(--font-mono);
            font-size: 12px;
            letter-spacing: 1px;
            cursor: pointer;
            transition: all 0.2s;
            text-transform: uppercase;
        }

        .entry-btn:hover {
            background: var(--danger);
            color: #000;
            box-shadow: 0 0 15px var(--danger);
        }

        /* PHASE 3: GREETING */
        #phase-greeting {
            display: none;
            position: relative;
            z-index: 10;
            text-align: center;
            opacity: 0;
            transition: opacity 0.8s;
            max-width: 600px;
            padding: 20px;
        }

        .greeting-title {
            font-size: 32px;
            color: var(--accent);
            font-family: 'Segoe UI', serif;
            margin-bottom: 20px;
            font-weight: 300;
        }

        .greeting-text {
            font-size: 16px;
            color: #aaa;
            line-height: 1.6;
            font-family: var(--font-sans);
        }

        /* --- BACKGROUND GRID (MAIN APP) --- */
        .grid-bg {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-image: 
                linear-gradient(var(--grid-color) 1px, transparent 1px),
                linear-gradient(90deg, var(--grid-color) 1px, transparent 1px);
            background-size: 50px 50px;
            z-index: 0; pointer-events: none;
            transform: translateZ(-500px) scale(2); 
        }

        /* --- CUSTOM CURSOR SYSTEM --- */
        #cursor {
            position: fixed; top: 0; left: 0;
            width: var(--cursor-size); height: var(--cursor-size);
            background: transparent; border: 2px solid var(--accent);
            transform: translate(-50%, -50%) rotate(45deg);
            pointer-events: none; 
            z-index: 100000;
            transition: background-color 0.2s, border-color 0.2s;
            mix-blend-mode: difference;
        }
        #cursor::after {
            content: ''; position: absolute; top: 50%; left: 50%;
            width: 4px; height: 4px; background: var(--accent);
            transform: translate(-50%, -50%);
        }
        #cursor.hovered {
            background-color: var(--accent-dim); border-color: var(--accent);
            transform: translate(-50%, -50%) rotate(45deg);
        }

        /* --- CANVAS LAYER --- */
        #network-canvas {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 1; pointer-events: none;
        }

        /* --- NODES CONTAINER (THE 3D WORLD) --- */
        #system-space {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 2;
            transform-style: preserve-3d; 
            transition: transform 0.1s ease-out, opacity 1s ease;
            will-change: transform;
            opacity: 0; /* Hidden during loading */
        }

        #system-space.active { opacity: 1; }

        #system-space.view-detail .node:not(.docked) {
            opacity: 0.1; filter: grayscale(100%); pointer-events: none;
            transition: opacity 0.5s, filter 0.5s;
        }
        
        #system-space.view-detail #node-core,
        #system-space.view-detail #node-head {
            opacity: 0.1; transform: translate3d(-50%, -50%, -50px);
        }

        /* --- 3D HEXAGON NODE WRAPPER --- */
        .node {
            position: absolute; width: var(--node-width); height: var(--node-height);
            transform-style: preserve-3d; transform: translate3d(-50%, -50%, 0);
            cursor: pointer; transition: all 0.6s cubic-bezier(0.2, 0.8, 0.2, 1);
        }

        .node.docked {
            left: 50% !important; top: 50% !important;
            transform: translate3d(-50%, -50%, 100px) scale(1.2) !important;
            z-index: 100;
        }
        
        .node.docked .node-content-inner { opacity: 0; transition: opacity 0.3s 0.4s; }

        .prism { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; transition: transform 0.3s ease; }
        .node:hover .prism { transform: translateZ(20px) scale(1.05); }

        .face { position: absolute; backface-visibility: hidden; }
        .face-front {
            width: 100%; height: 100%;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            background: rgba(45, 48, 55, 0.95);
            transform: translateZ(calc(var(--hex-depth) / 2));
            display: flex; flex-direction: column; align-items: center; justify-content: center;
            border: 1px solid rgba(255,255,255,0.1); z-index: 2;
        }
        .face-front::after {
            content: ''; position: absolute; top: 2px; left: 2px; right: 2px; bottom: 2px;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            border: 2px solid rgba(255,255,255,0.1); z-index: 3;
        }
        .node:hover .face-front::after { border-color: var(--accent); }

        .face-back {
            width: 100%; height: 100%;
            clip-path: polygon(25% 0%, 75% 0%, 100% 50%, 75% 100%, 25% 100%, 0% 50%);
            background: rgba(30, 30, 35, 0.9);
            transform: translateZ(calc(var(--hex-depth) / -2)) rotateY(180deg);
            box-shadow: 0 0 50px rgba(0,240,255,0.1);
        }

        .side {
            position: absolute; width: 82px; height: var(--hex-depth);
            background: #2d3035; border: 1px solid #444; opacity: 0.95;
            left: 39px; top: 50px; transform-origin: center;
        }
        .node:hover .side { background: #3a3d42; border-color: var(--accent-dim); box-shadow: 0 0 10px var(--accent-dim); }

        .node-content-inner { text-align: center; pointer-events: none; display: flex; flex-direction: column; align-items: center; }
        .node-icon { font-size: 28px; margin-bottom: 5px; color: var(--text-main); transform: translateZ(10px); }
        .node-label { font-size: 11px; letter-spacing: 1px; text-transform: uppercase; font-weight: bold; margin-bottom: 3px; }
        .node-sub { font-size: 9px; color: var(--text-muted); text-transform: uppercase; }

        #node-core { --node-width: 200px; --node-height: 170px; --hex-depth: 50px; }
        #node-core .side { width: 102px; left: 49px; top: 65px; height: 50px; } 
        #node-core .node-label { font-size: 13px; color: var(--accent); transition: color 0.3s; }
        #node-core:hover .node-label { color: #fff; text-shadow: 0 0 10px rgba(255,255,255,0.8); }

        #node-head { --node-width: 120px; --node-height: 104px; --hex-depth: 30px; }
        #node-head .side { width: 62px; left: 29px; top: 37px; height: 30px; }
        #node-head .node-icon { font-size: 20px; margin: 0; }
        #node-head .node-label { font-size: 14px; margin: 0; color: #fff; }

        /* --- DETAIL LAYER --- */
        #detail-layer {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            z-index: 5; background: rgba(0, 0, 0, 0.6); backdrop-filter: blur(2px);
            display: flex; justify-content: center; align-items: center;
            opacity: 0; pointer-events: none; transition: opacity 0.3s ease;
            perspective: 1500px;
        }
        #detail-layer.active { opacity: 1; pointer-events: auto; }

        .panel {
            width: 92vmin; height: 92vmin; max-width: none; display: none; flex-direction: column;
            position: relative; background: #0a0a0a; border: 1px solid #333;
            box-shadow: 0 0 0 1px #222, 0 30px 60px rgba(0,0,0,0.8);
            transform-origin: center center; overflow: hidden; transition: width 0.3s, height 0.3s;
        }
        .panel.active { display: flex; animation: panelUnfold 0.6s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
        @keyframes panelUnfold {
            0% { opacity: 0; transform: scale(0.1) rotateX(20deg); width: 160px; height: 140px; }
            40% { opacity: 1; width: 160px; height: 140px; transform: scale(1) rotateX(0deg); }
            100% { opacity: 1; transform: scale(1) rotateX(0deg); width: 92vmin; height: 92vmin; }
        }
        .panel.maximized { width: 100% !important; height: 100% !important; max-width: none !important; border: none; transform: none !important; border-radius: 0; }

        .panel-header { display: flex; flex-direction: column; background: linear-gradient(to bottom, #252526, #1e1e1e); border-bottom: 1px solid #000; padding: 0; height: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.3); z-index: 10; }
        .window-top-bar { display: flex; justify-content: space-between; align-items: center; padding-left: 15px; height: 35px; user-select: none; }
        .panel-title { font-size: 13px; color: #e0e0e0; font-family: var(--font-sans); letter-spacing: 0.5px; display: flex; align-items: center; gap: 10px; text-shadow: 0 1px 2px rgba(0,0,0,0.5); }
        .panel-title::before { content: 'üìÇ'; font-size: 12px; opacity: 0.7; filter: drop-shadow(0 2px 2px rgba(0,0,0,0.5)); }
        .window-controls { display: flex; height: 100%; }
        .window-btn { width: 46px; height: 100%; display: flex; justify-content: center; align-items: center; font-family: 'Segoe UI', sans-serif; font-size: 10px; color: #ccc; cursor: pointer; transition: background 0.1s; }
        .window-btn:hover { background: #3e3e42; }
        .close-btn:hover { background: #e81123 !important; color: white !important; }
        .window-address-bar { display: flex; align-items: center; gap: 12px; padding: 8px 15px; background: #1a1a1a; border-top: 1px solid #000; box-shadow: inset 0 2px 5px rgba(0,0,0,0.2); }
        .nav-icons { display: flex; gap: 15px; color: #888; font-size: 14px; user-select: none; }
        .nav-icon { cursor: pointer; transition: color 0.2s, transform 0.1s; }
        .nav-icon:hover { color: #fff; transform: scale(1.1); }
        .nav-icon.disabled { color: #444; cursor: default; transform: none; }
        .panel-id { flex-grow: 1; background: #000; border: 1px solid #333; color: var(--text-muted); font-family: var(--font-mono); font-size: 12px; padding: 4px 10px; height: 28px; display: flex; align-items: center; cursor: pointer; position: relative; z-index: 50; transition: border-color 0.2s, background-color 0.2s; }
        .panel-id:hover { border-color: #555; background: #111; color: #ccc; }
        .dropdown-arrow { margin-left: auto; font-size: 8px; opacity: 0.5; transition: transform 0.2s; }
        .path-dropdown { position: absolute; top: 100%; left: -1px; width: calc(100% + 2px); background: #0a0a0a; border: 1px solid #333; border-top: none; list-style: none; padding: 0; margin: 0; display: none; box-shadow: 0 10px 30px rgba(0,0,0,0.9); z-index: 100; }
        .path-dropdown.open { display: block; }
        .path-dropdown li { padding: 8px 10px; border-bottom: 1px solid #1a1a1a; color: #666; font-size: 11px; transition: all 0.2s; }
        .path-dropdown li:hover { background: #1a1a1a; color: var(--accent); padding-left: 15px; }
        .panel-id.active-dropdown .dropdown-arrow { transform: rotate(180deg); opacity: 1; }

        .panel-content { padding: 40px; overflow-y: auto; flex-grow: 1; font-family: var(--font-sans); line-height: 1.6; }
        h3 { font-family: var(--font-mono); color: var(--text-main); margin-top: 30px; margin-bottom: 15px; border-left: 4px solid var(--accent); padding-left: 15px; text-transform: uppercase; font-size: 16px; }
        p { color: #bbb; margin-bottom: 15px; line-height: 1.6; max-width: 900px; }
        .tag-cluster { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 20px; }
        .tag { border: 1px solid rgba(255,255,255,0.1); background: rgba(0,0,0,0.3); padding: 5px 15px; font-size: 11px; font-family: var(--font-mono); color: var(--text-main); }
        .tag.highlight { border-color: var(--accent-dim); color: var(--accent); }
        .btn-link { display: inline-flex; align-items: center; justify-content: center; padding: 10px 20px; background: transparent; border: 1px solid var(--accent); color: var(--accent); text-decoration: none; font-family: var(--font-mono); font-size: 12px; text-transform: uppercase; transition: all 0.2s; cursor: pointer; font-weight: bold; margin-top: 10px;}
        .btn-link:hover { background: var(--accent); color: #000; }
        .resume-container { font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif; color: #ccc; max-width: 900px; margin: 0 auto; }
        .resume-header { border-bottom: 2px solid var(--accent); padding-bottom: 10px; margin-bottom: 20px; }
        .resume-name { font-size: 32px; color: #fff; font-weight: bold; }
        .resume-contact { font-size: 14px; color: #aaa; margin-top: 5px; }
        .resume-section-title { font-size: 18px; color: var(--accent); text-transform: uppercase; margin-top: 30px; margin-bottom: 10px; font-weight: bold; }
        .resume-item { margin-bottom: 20px; border-left: 2px solid #333; padding-left: 15px; }
        .resume-item-title { font-size: 16px; color: #fff; font-weight: 600; }
        .resume-item-sub { font-size: 13px; color: #888; font-style: italic; margin-bottom: 5px; }
        .btn-link.resume-download { margin-top: 40px; width: 100%; border-style: dashed; }
        .btn-link.resume-download:hover { border-style: solid; }
        .sub-project { background: linear-gradient(145deg, rgba(255,255,255,0.03), rgba(0,0,0,0.2)); border: 1px solid #222; padding: 25px; margin-bottom: 30px; transition: all 0.3s ease; }
        .sub-project:hover { border-color: var(--accent-dim); transform: translateY(-3px); }
        .sub-title { font-size: 18px; color: #fff; margin-bottom: 10px; display: flex; align-items: center; gap: 10px; }
        .sub-meta { font-size: 12px; color: var(--accent); margin-bottom: 15px; font-family: var(--font-mono); }
        .service-card { background: rgba(255,255,255,0.02); border: 1px solid #222; padding: 20px; margin-bottom: 20px; border-left: 3px solid #333; transition: 0.3s; }
        .service-card:hover { border-left-color: var(--accent); background: rgba(255,255,255,0.04); }
        .process-step { display: flex; gap: 20px; margin-bottom: 30px; }
        .step-num { font-size: 32px; font-weight: bold; color: #333; font-family: var(--font-mono); min-width: 50px; }
        .step-content { border-bottom: 1px solid #222; padding-bottom: 20px; width: 100%; }
        .step-title { color: var(--accent); font-size: 16px; margin-bottom: 5px; text-transform: uppercase; }
        .contact-row { display: flex; align-items: center; gap: 15px; margin-bottom: 20px; padding: 15px; border: 1px solid #222; transition: 0.2s; background: rgba(0,0,0,0.2); text-decoration: none;}
        .contact-row:hover { border-color: var(--accent); background: rgba(0, 240, 255, 0.05); }
        .contact-label { width: 100px; color: #666; font-size: 12px; font-family: var(--font-mono); }
        .contact-value { color: #fff; font-size: 14px; }

        @media (max-width: 768px) {
            :root { --node-width: 130px; --node-height: 112px; }
            #node-core { width: 180px; height: 155px; }
            .panel { width: 100%; height: 100%; border: none; transform: none !important; }
            .window-address-bar { display: none; } 
            .panel-content { padding: 20px; }
            #cursor { display: none; }
            * { cursor: auto; }
            #system-space { transform: none !important; perspective: none; }
            .prism { transform: none !important; }
            .side { display: none; }
            .face-front { transform: none !important; }
            .face-back { display: none; }
        }
    </style>
</head>
<body>

    <!-- ENTRY / LOADING SCREEN -->
    <div id="entry-screen">
        <canvas id="entry-canvas"></canvas>
        
        <!-- Phase 1: Intro -->
        <div id="phase-intro">
            <div class="intro-quote">"WELCOME TO SOHIL'S PORTFOLIO"</div>
        </div>

        <!-- Phase 2: Form -->
        <div id="phase-form">
            <div class="entry-modal">
                <div class="terminal-header">SECURITY ANALYST // VERIFICATION_PROTOCOL</div>
                <div class="entry-content">
                    <div class="input-group">
                        <label>SUBJECT IDENTITY:</label>
                        <input type="text" id="visitor-name" placeholder="Enter Full Name" autocomplete="off">
                    </div>
                    <div class="input-group">
                        <label>GENDER CLASSIFICATION:</label>
                        <select id="visitor-gender">
                            <option value="">-- SELECT PROTOCOL --</option>
                            <option value="male">MALE</option>
                            <option value="female">FEMALE</option>
                            <option value="none">UNDISCLOSED</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label>OPERATIONAL ROLE:</label>
                        <input type="text" id="visitor-role" placeholder="Current Designation / Title" autocomplete="off">
                    </div>
                    <div class="input-group">
                        <label>ACCESS OBJECTIVE:</label>
                        <input type="text" id="visitor-purpose" placeholder="Reason for Entry" autocomplete="off">
                    </div>
                    <button id="btn-enter" class="entry-btn">GRANT_ACCESS</button>
                </div>
            </div>
        </div>

        <!-- Phase 3: Greeting -->
        <div id="phase-greeting">
            <div class="greeting-title" id="greet-title"></div>
            <div class="greeting-text">
                "I hope you are having a nice day. It's a pleasure to see you here."
            </div>
        </div>

    </div>

    <!-- MAIN SYSTEM -->
    <div class="grid-bg"></div>
    <canvas id="network-canvas"></canvas>
    <div id="cursor"></div>

    <!-- NODE SYSTEM -->
    <div id="system-space" class="view-system">
        
        <!-- HEAD -->
        <div class="node" id="node-head" data-target="about">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚óÜ</div>
                <div class="node-label">CS</div>
            </div>
        </div>

        <!-- BODY -->
        <div class="node" id="node-core" data-target="about">
            <div class="node-content-source" style="display:none">
                <div class="node-icon"></div>
                <div class="node-label">Chinthaginjala<br>Sohil<br>Subramanyam</div>
                <div class="node-sub">Security-Focused<br>Full-Stack Developer</div>
            </div>
        </div>

        <!-- LEGS -->
        <div class="node" id="node-p1" data-target="ashvaka">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚ö°</div><div class="node-label">Ashvaka<br>Lab</div><div class="node-sub">Projects</div>
            </div>
        </div>

        <div class="node" id="node-services" data-target="services">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚öô</div><div class="node-label">Services</div><div class="node-sub">Solutions</div>
            </div>
        </div>

        <div class="node" id="node-resume" data-target="resume">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">üìÑ</div><div class="node-label">System<br>Log</div><div class="node-sub">Resume</div>
            </div>
        </div>

        <div class="node" id="node-skills" data-target="skills">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚öí</div><div class="node-label">Technical<br>Stack</div><div class="node-sub">Competencies</div>
            </div>
        </div>

        <div class="node" id="node-process" data-target="process">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚Ü∫</div><div class="node-label">Workflow</div><div class="node-sub">Methodology</div>
            </div>
        </div>

        <div class="node" id="node-contact" data-target="contact">
            <div class="node-content-source" style="display:none">
                <div class="node-icon">‚úâ</div><div class="node-label">Comms<br>Uplink</div><div class="node-sub">Connect</div>
            </div>
        </div>

    </div>

    <!-- RECTANGULAR WINDOW CONTAINER -->
    <div id="detail-layer">
        
        <!-- ABOUT PANEL -->
        <div class="panel" id="panel-about">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">System Identity</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /SYSTEM/IDENTITY</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <h3>// Profile</h3>
                <p>I am a security-focused full-stack developer and student engaged in building security-aware and civic-impact web systems. My work explores encryption, steganography, decentralized thinking, and accountability-driven platforms. I value projects that solve real problems and reveal how systems behave under constraints.</p>
                <h3>// Core Philosophy</h3>
                <p>I approach software as a system, not a feature list. I focus on privacy, security, and real-world impact, prioritizing clear architecture and intent over surface-level polish. If a system cannot be reasoned about, it cannot be trusted.</p>
            </div>
        </div>

        <!-- ASHVAKA PANEL (PROJECTS) -->
        <div class="panel" id="panel-ashvaka">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">Ashvaka Lab</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /ASHVAKA/LAB</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <p style="border-bottom: 1px solid #333; padding-bottom: 20px;"><strong>Ashvaka Lab</strong> serves as the central hub for my freelance initiatives and systems development. Below are the key projects developed under this entity.</p>
                
                <div class="sub-project">
                    <div class="sub-title"><span>‚è£</span> NyxKryptos</div>
                    <div class="sub-meta">SECURITY / PRIVACY SYSTEMS</div>
                    <p>NyxKryptos is a decentralized file-exchange concept that combines encryption and steganography to enable secure data transfer without relying on centralized storage. The project focuses on client-side security and obscured communication rather than traditional cloud-based sharing.</p>
                    <div class="tag-cluster"><span class="tag">HTML/CSS/JS</span><span class="tag">Cryptography</span><span class="tag">Steganography</span></div>
                    <div style="margin-top: 20px;"><a href="https://github.com/Sohil-subramanyam/nyxkryptos" target="_blank" class="btn-link">View Source Code</a></div>
                </div>

                <div class="sub-project">
                    <div class="sub-title"><span>‚ö°</span> Ashvaka Sm·πõsti</div>
                    <div class="sub-meta">CIVIC TECH / SOCIAL IMPACT</div>
                    <p>Ashvaka Sm·πõsti is a civic-awareness platform designed to highlight the disconnect between citizens, NGOs, and volunteers. The system emphasizes accountability, visibility, and feedback loops rather than one-way complaint reporting.</p>
                    <div class="tag-cluster"><span class="tag">UI Architecture</span><span class="tag">Civic Tech</span><span class="tag">Web Platform</span></div>
                    <div style="margin-top: 20px;"><a href="https://github.com/Sohil-subramanyam/one-step-ashvaka-smristi" target="_blank" class="btn-link">View Source Code</a></div>
                </div>
            </div>
        </div>

        <!-- SERVICES PANEL -->
        <div class="panel" id="panel-services">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">Ashvaka Services</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /ASHVAKA/SERVICES</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <div class="service-card">
                    <h4 style="color:#fff; font-size:18px; margin-bottom:5px;">Web Application Development</h4>
                    <p>Designing and building structured, responsive web applications with a focus on clarity, performance, and intent.</p>
                </div>
                <div class="service-card">
                    <h4 style="color:#fff; font-size:18px; margin-bottom:5px;">Security-Aware Prototyping</h4>
                    <p>Developing proof-of-concept systems that explore privacy, encryption, and decentralized interaction models.</p>
                </div>
                <div class="service-card">
                    <h4 style="color:#fff; font-size:18px; margin-bottom:5px;">Hackathon & Research Prototypes</h4>
                    <p>Rapidly building experimental systems for hackathons and academic exploration.</p>
                </div>
            </div>
        </div>

        <!-- PROCESS PANEL -->
        <div class="panel" id="panel-process">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">System Workflow</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /SYSTEM/WORKFLOW</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <div class="process-step">
                    <div class="step-num">01</div>
                    <div class="step-content">
                        <div class="step-title">Problem Deconstruction</div>
                        <p>Breaking the problem into actors, constraints, and failure points.</p>
                    </div>
                </div>
                <div class="process-step">
                    <div class="step-num">02</div>
                    <div class="step-content">
                        <div class="step-title">System Design</div>
                        <p>Mapping components, data flow, and trust boundaries before coding.</p>
                    </div>
                </div>
                <div class="process-step">
                    <div class="step-num">03</div>
                    <div class="step-content">
                        <div class="step-title">Build & Iterate</div>
                        <p>Implementing minimal but functional systems and refining based on behavior, not assumptions.</p>
                    </div>
                </div>
                <div class="process-step">
                    <div class="step-num">04</div>
                    <div class="step-content">
                        <div class="step-title">Review & Harden</div>
                        <p>Identifying weaknesses, edge cases, and security gaps.</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- RESUME PANEL -->
        <div class="panel" id="panel-resume">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">Resume Log</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /DATA/RESUME_LOG</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="resume">/DATA/RESUME_LOG</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <div class="resume-container">
                    <div class="resume-header">
                        <div class="resume-name">Chinthaginjala Sohil Subramanyam</div>
                        <div class="resume-contact">sohillucky2007@gmail.com | +91 9390471433</div>
                    </div>
                    <div class="resume-section-title">Summary</div>
                    <p>I am a student developer focused on building security-aware and civic-impact web systems. My work explores encryption, steganography, decentralized thinking, and accountability-driven platforms. I value projects that solve real problems and reveal how systems behave under constraints.</p>
                    
                    <div class="resume-section-title">Education</div>
                    <div class="resume-item">
                        <div class="resume-item-title">Computer Science & Engineering</div>
                        <p>Currently focused on Cyber Security.</p>
                    </div>
                    
                    <div class="resume-section-title">Experience</div>
                    <div class="resume-item">
                        <div class="resume-item-title">Ashvaka Lab</div>
                        <div class="resume-item-sub">Student Researcher & Developer</div>
                        <p>Developing proof-of-concepts for decentralized security and civic engagement.</p>
                    </div>
                    
                    <a href="https://drive.google.com/file/d/1piNrwYtAWPdCClLlLLEEjV1UYoxyR7CM/view" target="_blank" class="btn-link resume-download">OPEN PDF RESUME</a>
                </div>
            </div>
        </div>

        <!-- SKILLS PANEL -->
        <div class="panel" id="panel-skills">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">System Stack</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /CONFIG/STACK</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="resume">/DATA/RESUME_LOG</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px;">
                    <div>
                        <h4 style="color:#888; font-size:12px; margin-bottom:10px;">FRONTEND</h4>
                        <div class="tag-cluster">
                            <span class="tag highlight">HTML</span><span class="tag highlight">CSS</span><span class="tag">JavaScript</span>
                        </div>
                    </div>
                    <div>
                        <h4 style="color:#888; font-size:12px; margin-bottom:10px;">SECURITY & SYSTEMS</h4>
                        <div class="tag-cluster">
                            <span class="tag highlight">Security-first thinking</span><span class="tag">Cryptography</span><span class="tag">Steganography</span><span class="tag">P2P</span>
                        </div>
                    </div>
                    <div>
                        <h4 style="color:#888; font-size:12px; margin-bottom:10px;">LOGIC / BACKEND</h4>
                        <div class="tag-cluster">
                            <span class="tag">Node.js</span><span class="tag">API Concepts</span><span class="tag">Backend Arch</span>
                        </div>
                    </div>
                    <div>
                        <h4 style="color:#888; font-size:12px; margin-bottom:10px;">TOOLS</h4>
                        <div class="tag-cluster">
                            <span class="tag highlight">Git</span><span class="tag highlight">GitHub</span><span class="tag">Vercel</span>
                        </div>
                    </div>
                </div>
                <div style="margin-top: 30px; border-top: 1px solid #222; padding-top: 15px; font-family: var(--font-mono); font-size: 10px; color: var(--text-muted); display: flex; gap: 20px; align-items: center; justify-content: center;">
                    <div style="display: flex; align-items: center; gap: 8px;"><span style="width: 8px; height: 8px; background: var(--accent-dim); display: inline-block; border: 1px solid var(--accent);"></span><span>CORE</span></div>
                    <div style="display: flex; align-items: center; gap: 8px;"><span style="width: 8px; height: 8px; background: rgba(0,0,0,0.3); display: inline-block; border: 1px solid rgba(255,255,255,0.1);"></span><span>PROFICIENT</span></div>
                </div>
            </div>
        </div>

        <!-- CONTACT PANEL -->
        <div class="panel" id="panel-contact">
            <div class="panel-header">
                <div class="window-top-bar">
                    <div class="panel-title">Secure Uplink</div>
                    <div class="window-controls"><div class="window-btn btn-min">_</div><div class="window-btn btn-max">‚ñ°</div><button class="window-btn close-btn">‚úï</button></div>
                </div>
                <div class="window-address-bar">
                    <div class="nav-icons"><span class="nav-icon nav-back">‚Üê</span><span class="nav-icon nav-fwd">‚Üí</span><span class="nav-icon nav-up">‚Üë</span></div>
                    <div class="panel-id location-trigger"><span>LOC: /NET/COMM_UPLINK</span><span class="dropdown-arrow">‚ñº</span><ul class="path-dropdown"><li data-dest="about">/SYSTEM/IDENTITY</li><li data-dest="ashvaka">/PROJECTS/ASHVAKA</li><li data-dest="services">/ASHVAKA/SERVICES</li><li data-dest="process">/SYSTEM/WORKFLOW</li><li data-dest="resume">/DATA/RESUME_LOG</li><li data-dest="skills">/CONFIG/STACK</li><li data-dest="contact">/NET/COMM_UPLINK</li></ul></div>
                </div>
            </div>
            <div class="panel-content">
                <p>Available for secure communications and collaborative development.</p>
                <div style="margin-top: 30px;">
                    <a href="https://mail.google.com/mail/?view=cm&fs=1&to=sohillucky2007@gmail.com" target="_blank" class="contact-row">
                        <div class="contact-label">EMAIL</div><div class="contact-value">sohillucky2007@gmail.com</div>
                    </a>
                    <a href="tel:+919390471433" class="contact-row">
                        <div class="contact-label">PHONE</div><div class="contact-value">+91 9390471433</div>
                    </a>
                    <a href="https://www.linkedin.com/in/sohil-subramanyam/" target="_blank" class="contact-row">
                        <div class="contact-label">LINKEDIN</div><div class="contact-value">Sohil Subramanyam</div>
                    </a>
                    <a href="https://github.com/Sohil-subramanyam" target="_blank" class="contact-row">
                        <div class="contact-label">GITHUB</div><div class="contact-value">Sohil-subramanyam</div>
                    </a>
                </div>
            </div>
        </div>

    </div>

    <script>
        // --- ENTRY SCREEN & BINARY WEB ---
        (function() {
            const entryCanvas = document.getElementById('entry-canvas');
            const entryCtx = entryCanvas.getContext('2d');
            let width, height;
            let particles = [];
            const numRays = 12; // Number of main radial threads

            function resizeEntry() {
                width = entryCanvas.width = window.innerWidth;
                height = entryCanvas.height = window.innerHeight;
            }

            // Create particles flowing to center ALONG THE WEB SPOKES
            class BinaryParticle {
                constructor() {
                    this.reset(true);
                }
                reset(randomStart) {
                    // Lock particle to a specific ray/spoke angle
                    const rayIndex = Math.floor(Math.random() * numRays);
                    this.angle = (Math.PI * 2 * rayIndex) / numRays;
                    
                    const maxDist = Math.max(width, height) / 1.5;
                    this.dist = randomStart ? Math.random() * maxDist : maxDist;
                    
                    this.speed = 2 + Math.random() * 3;
                    this.char = Math.random() > 0.5 ? '1' : '0';
                    this.opacity = 0;
                }
                update() {
                    // Move towards center (distance decreases)
                    this.dist -= this.speed;
                    
                    // Reset if reached center
                    if (this.dist < 20) this.reset(false);
                    
                    // Calculate cartesian position based on polar coordinates
                    const cx = width / 2;
                    const cy = height / 2;
                    this.x = cx + Math.cos(this.angle) * this.dist;
                    this.y = cy + Math.sin(this.angle) * this.dist;
                    
                    // Fade in/out based on distance logic
                    // Fade in as it enters screen, fade out as it hits the center hole
                    if (this.dist > 200) this.opacity = Math.min(this.opacity + 0.05, 1);
                    else this.opacity = Math.max(this.dist / 200, 0);
                }
                draw() {
                    entryCtx.fillStyle = `rgba(255, 60, 60, ${this.opacity})`; // Bright Red
                    entryCtx.font = '12px monospace';
                    entryCtx.fillText(this.char, this.x, this.y);
                }
            }

            function initParticles() {
                particles = [];
                for(let i=0; i<200; i++) particles.push(new BinaryParticle());
            }

            function animateEntry() {
                if(document.getElementById('entry-screen').style.display === 'none') return;
                
                entryCtx.clearRect(0,0,width,height);
                
                const cx = width/2;
                const cy = height/2;
                const maxRadius = Math.max(width, height) * 0.7;
                
                // --- GLOW PULSE PHYSICS ---
                const time = Date.now();
                // Oscillate between 0 and 1 every ~1.2 seconds
                const pulse = (Math.sin(time / 400) + 1) / 2; 
                
                // Calculate dynamic visual properties
                const webAlpha = 0.3 + (pulse * 0.5);   // Opacity: 0.3 to 0.8 (Much brighter)
                const glowBlur = 5 + (pulse * 20);       // Glow: 5px to 25px (Stronger glow)
                
                // --- DRAW SPIDER WEB STRUCTURE ---
                entryCtx.strokeStyle = `rgba(255, 60, 60, ${webAlpha})`; 
                entryCtx.lineWidth = 1.5; // Slightly thicker lines for visibility
                // Add the breathing glow
                entryCtx.shadowColor = 'rgba(255, 40, 40, 0.9)';
                entryCtx.shadowBlur = glowBlur;
                
                // 1. Draw Radial Spokes (Anchor Lines)
                entryCtx.beginPath();
                for(let i=0; i<numRays; i++) {
                    const angle = (Math.PI * 2 * i) / numRays;
                    entryCtx.moveTo(cx, cy);
                    entryCtx.lineTo(cx + Math.cos(angle) * maxRadius, cy + Math.sin(angle) * maxRadius);
                }
                entryCtx.stroke();

                // 2. Draw Spiral/Concentric Capture Threads with Curve/Sag
                entryCtx.beginPath();
                // Start a bit out from center
                const spacing = 40;
                for(let r = 40; r < maxRadius; r += spacing) {
                    for(let i=0; i<numRays; i++) {
                        const angle1 = (Math.PI * 2 * i) / numRays;
                        const angle2 = (Math.PI * 2 * (i+1)) / numRays; // Connect to next spoke
                        
                        // Start point on current spoke
                        const x1 = cx + Math.cos(angle1) * r;
                        const y1 = cy + Math.sin(angle1) * r;
                        
                        // End point on next spoke
                        const x2 = cx + Math.cos(angle2) * r;
                        const y2 = cy + Math.sin(angle2) * r;

                        // Control Point for Curve (Sag towards center)
                        // Calculate mid-angle
                        const midAngle = (angle1 + angle2) / 2;
                        // Determine wrapping for last segment
                        let realMidAngle = midAngle;
                        if(i === numRays - 1) realMidAngle = angle1 + (Math.PI / numRays);

                        // Sag radius is slightly less than r (e.g., 0.85 * r)
                        const sagR = r * 0.85; 
                        const cpx = cx + Math.cos(realMidAngle) * sagR;
                        const cpy = cy + Math.sin(realMidAngle) * sagR;

                        entryCtx.moveTo(x1, y1);
                        entryCtx.quadraticCurveTo(cpx, cpy, x2, y2);
                    }
                }
                entryCtx.stroke();

                // Reset shadow so text particles remain crisp
                entryCtx.shadowBlur = 0;

                // --- DRAW DATA FLOW ---
                particles.forEach(p => { p.update(); p.draw(); });
                
                requestAnimationFrame(animateEntry);
            }

            resizeEntry();
            initParticles();
            animateEntry();
            window.addEventListener('resize', () => { resizeEntry(); initParticles(); });

            // SEQUENCE LOGIC
            const phaseIntro = document.getElementById('phase-intro');
            const phaseForm = document.getElementById('phase-form');
            const phaseGreeting = document.getElementById('phase-greeting');
            const entryScreen = document.getElementById('entry-screen');
            const systemSpace = document.getElementById('system-space');

            // Phase 1 -> 2
            setTimeout(() => {
                phaseIntro.style.opacity = '0';
                setTimeout(() => {
                    phaseIntro.style.display = 'none';
                    phaseForm.style.display = 'block';
                    setTimeout(() => phaseForm.style.opacity = '1', 100);
                }, 500);
            }, 2500);

            // Phase 2 -> 3
            document.getElementById('btn-enter').addEventListener('click', () => {
                const name = document.getElementById('visitor-name').value || 'Guest';
                const gender = document.getElementById('visitor-gender').value;
                let prefix = '';
                
                if (gender === 'male') prefix = 'Mr. ';
                else if (gender === 'female') prefix = 'Ms. ';
                
                const fullName = prefix + name;
                document.getElementById('greet-title').textContent = `Welcome ${fullName}`;

                phaseForm.style.opacity = '0';
                setTimeout(() => {
                    phaseForm.style.display = 'none';
                    phaseGreeting.style.display = 'block';
                    setTimeout(() => phaseGreeting.style.opacity = '1', 100);
                    
                    // Phase 3 -> Main System
                    setTimeout(() => {
                        entryScreen.style.opacity = '0';
                        setTimeout(() => {
                            entryScreen.style.display = 'none';
                            systemSpace.classList.add('active');
                        }, 1000);
                    }, 3000);
                }, 500);
            });

        })();

        // --- MAIN SYSTEM LOGIC ---
        const CONFIG = { friction: 0.8, cursorLag: 0.5, magneticDist: 100 };
        const STATE = { view: 'system', hoveredNode: null, mouseX: window.innerWidth/2, mouseY: window.innerHeight/2, cursorX: window.innerWidth/2, cursorY: window.innerHeight/2, history: [], historyIndex: -1, isNavigating: false };

        const canvas = document.getElementById('network-canvas');
        const ctx = canvas.getContext('2d');
        const cursor = document.getElementById('cursor');
        const systemSpace = document.getElementById('system-space');
        const detailLayer = document.getElementById('detail-layer');
        const nodes = Array.from(document.querySelectorAll('.node'));
        
        function createHexPrism(node) {
            const contentSource = node.querySelector('.node-content-source');
            if(!contentSource) return;
            node.innerHTML = '';
            const prism = document.createElement('div'); prism.className = 'prism';
            const front = document.createElement('div'); front.className = 'face face-front';
            front.innerHTML = `<div class="node-content-inner">${contentSource.innerHTML}</div>`;
            const back = document.createElement('div'); back.className = 'face face-back';
            const sideAngles = [0, 60, 120, 180, 240, 300];
            
            // Default sizes based on CSS
            let sideWidth = 82; 
            let transY = -69;
            
            // Adjust for specific nodes
            if(node.id === 'node-core') {
                sideWidth = 102; transY = -84; // Approx calc for 200px width hex
            } else if (node.id === 'node-head') {
                sideWidth = 62; transY = -51; // Approx calc for 120px width hex
            }

            sideAngles.forEach(angle => {
                const side = document.createElement('div'); side.className = 'side';
                side.style.width = sideWidth + 'px'; // Dynamic side width
                side.style.transform = `rotateZ(${angle}deg) translateY(${transY}px) rotateX(90deg)`;
                prism.appendChild(side);
            });
            prism.appendChild(front); prism.appendChild(back);
            node.appendChild(prism);
        }

        function positionNodes() {
            const w = document.documentElement.clientWidth;
            const h = document.documentElement.clientHeight;
            const cx = w / 2;
            const cy = h / 2;
            
            // 1. Position Body (Core) - Moved Down
            const core = document.getElementById('node-core');
            const bodyY = cy + 40; // Shift down
            core.style.left = cx + 'px'; 
            core.style.top = bodyY + 'px';
            core.dataset.x = cx; core.dataset.y = bodyY;

            // 2. Position Head - Above Body
            const head = document.getElementById('node-head');
            const headY = bodyY - 150; // Above body
            head.style.left = cx + 'px';
            head.style.top = headY + 'px';
            head.dataset.x = cx; head.dataset.y = headY;

            // 3. Position Legs (Satellites)
            // Left Side: Skills, Workflow, Contact
            const leftLegs = ['node-skills', 'node-process', 'node-contact'];
            // Right Side: Ashvaka, Services, Resume
            const rightLegs = ['node-p1', 'node-services', 'node-resume'];

            // Leg Geometry
            const legSpreadX = 220; // Horizontal spread
            const legSpreadY = 90;  // Vertical spacing
            
            // Left Legs Positioning
            leftLegs.forEach((id, i) => {
                const node = document.getElementById(id);
                if(node) {
                    const lx = cx - legSpreadX - (i * 20); // Curve out slightly
                    const ly = (bodyY - 80) + (i * legSpreadY);
                    node.style.left = lx + 'px';
                    node.style.top = ly + 'px';
                    node.dataset.x = lx; node.dataset.y = ly;
                }
            });

            // Right Legs Positioning
            rightLegs.forEach((id, i) => {
                const node = document.getElementById(id);
                if(node) {
                    const rx = cx + legSpreadX + (i * 20); // Curve out slightly
                    const ry = (bodyY - 80) + (i * legSpreadY);
                    node.style.left = rx + 'px';
                    node.style.top = ry + 'px';
                    node.dataset.x = rx; node.dataset.y = ry;
                }
            });

            resizeCanvas();
        }

        function resizeCanvas() { canvas.width = document.documentElement.clientWidth; canvas.height = document.documentElement.clientHeight; }

        function drawNetwork() {
            if (STATE.view !== 'system') { ctx.clearRect(0, 0, canvas.width, canvas.height); return; }
            ctx.clearRect(0, 0, canvas.width, canvas.height); ctx.lineWidth = 1;
            
            const core = document.getElementById('node-core');
            const head = document.getElementById('node-head');
            const cx = parseFloat(core.dataset.x); const cy = parseFloat(core.dataset.y);
            const hx = parseFloat(head.dataset.x); const hy = parseFloat(head.dataset.y);

            // Connect Head to Body
            ctx.beginPath();
            ctx.strokeStyle = 'rgba(0, 240, 255, 0.5)';
            ctx.lineWidth = 2;
            ctx.moveTo(cx, cy); ctx.lineTo(hx, hy); ctx.stroke();

            // Connect Legs to Body
            const legNodes = nodes.filter(n => n.id !== 'node-core' && n.id !== 'node-head');
            legNodes.forEach(node => {
                const nx = parseFloat(node.dataset.x); const ny = parseFloat(node.dataset.y);
                
                // Curve logic for spider legs could go here, but straight lines for now
                const grad = ctx.createLinearGradient(cx, cy, nx, ny);
                grad.addColorStop(0, 'rgba(0, 240, 255, 0.4)'); 
                grad.addColorStop(1, 'rgba(255, 255, 255, 0.05)');
                
                ctx.beginPath(); 
                ctx.lineWidth = 1;
                ctx.strokeStyle = grad; 
                ctx.moveTo(cx, cy); 
                // Draw articulated leg joint visual?
                // Simple straight connection for system look
                ctx.lineTo(nx, ny); 
                ctx.stroke();
            });
            requestAnimationFrame(drawNetwork);
        }

        function updateCursor() {
            STATE.cursorX += (STATE.mouseX - STATE.cursorX) * CONFIG.cursorLag;
            STATE.cursorY += (STATE.mouseY - STATE.cursorY) * CONFIG.cursorLag;
            let isHovering = false;
            if (STATE.view === 'system') {
                const cx = window.innerWidth / 2; const cy = window.innerHeight / 2;
                const dx = (STATE.mouseX - cx) / cx; const dy = (STATE.mouseY - cy) / cy; 
                systemSpace.style.transform = `rotateY(${dx * 5}deg) rotateX(${-dy * 5}deg)`;
                nodes.forEach(node => {
                    const rect = node.getBoundingClientRect();
                    const dist = Math.hypot(STATE.mouseX - (rect.left + rect.width/2), STATE.mouseY - (rect.top + rect.height/2));
                    if (dist < CONFIG.magneticDist) isHovering = true;
                });
            }
            cursor.style.left = STATE.cursorX + 'px'; cursor.style.top = STATE.cursorY + 'px';
            if (isHovering) cursor.classList.add('hovered'); else cursor.classList.remove('hovered');
            requestAnimationFrame(updateCursor);
        }

        function handleNodeClick(e) {
            const node = e.target.closest('.node');
            if (!node) return;
            openDetail(node.dataset.target, node);
        }

        function openDetail(targetId, originNode = null) {
            STATE.view = 'detail';
            systemSpace.classList.remove('view-system'); systemSpace.classList.add('view-detail');
            
            if (!originNode) originNode = document.querySelector(`.node[data-target="${targetId}"]`);
            if (originNode) {
                document.querySelectorAll('.node').forEach(n => n.classList.remove('docked'));
                originNode.classList.add('docked');
            }

            setTimeout(() => {
                detailLayer.classList.add('active');
                if (!STATE.isNavigating) {
                    if (STATE.historyIndex < STATE.history.length - 1) {
                        STATE.history = STATE.history.slice(0, STATE.historyIndex + 1);
                    }
                    if (STATE.history[STATE.historyIndex] !== targetId) {
                        STATE.history.push(targetId);
                        STATE.historyIndex++;
                    }
                }
                STATE.isNavigating = false;
                document.querySelectorAll('.panel').forEach(p => { p.classList.remove('active'); p.classList.remove('maximized'); });
                const targetPanel = document.getElementById(`panel-${targetId}`);
                if (targetPanel) {
                    targetPanel.classList.add('active');
                    updateNavUI(targetPanel);
                }
            }, 300);
        }

        function closeDetail() {
            STATE.view = 'system';
            detailLayer.classList.remove('active');
            document.querySelectorAll('.node').forEach(n => n.classList.remove('docked'));
            document.querySelectorAll('.panel').forEach(p => { p.classList.remove('active'); p.classList.remove('maximized'); });
            systemSpace.classList.remove('view-detail'); systemSpace.classList.add('view-system');
            systemSpace.style.transform = 'none';
            drawNetwork();
        }

        function updateNavUI(panel) {
            const backBtn = panel.querySelector('.nav-back');
            const fwdBtn = panel.querySelector('.nav-fwd');
            if (backBtn) backBtn.classList.toggle('disabled', STATE.historyIndex <= 0);
            if (fwdBtn) fwdBtn.classList.toggle('disabled', STATE.historyIndex >= STATE.history.length - 1);
        }

        document.addEventListener('click', (e) => {
            // Dropdown Logic
            if (e.target.closest('.location-trigger')) {
                const trigger = e.target.closest('.location-trigger');
                const dropdown = trigger.querySelector('.path-dropdown');
                document.querySelectorAll('.path-dropdown').forEach(d => {
                    if (d !== dropdown) { d.classList.remove('open'); d.parentElement.classList.remove('active-dropdown'); }
                });
                dropdown.classList.toggle('open'); trigger.classList.toggle('active-dropdown');
                return;
            }
            
            const dropdownItem = e.target.closest('[data-dest]');
            if (dropdownItem) {
                openDetail(dropdownItem.getAttribute('data-dest'));
                return;
            }

            if (!e.target.closest('.location-trigger')) {
                document.querySelectorAll('.path-dropdown').forEach(d => {
                    d.classList.remove('open'); d.parentElement.classList.remove('active-dropdown');
                });
            }

            // Standard Navigation
            if (e.target.closest('.close-btn') || e.target.closest('.btn-min') || e.target.closest('.nav-up')) { closeDetail(); return; }
            if (e.target.closest('.btn-max')) { document.querySelector('.panel.active')?.classList.toggle('maximized'); return; }

            if (e.target.closest('.nav-back')) {
                if (STATE.historyIndex > 0) { STATE.historyIndex--; STATE.isNavigating = true; openDetail(STATE.history[STATE.historyIndex]); }
                return;
            }
            if (e.target.closest('.nav-fwd')) {
                if (STATE.historyIndex < STATE.history.length - 1) { STATE.historyIndex++; STATE.isNavigating = true; openDetail(STATE.history[STATE.historyIndex]); }
                return;
            }

            if (STATE.view === 'system') handleNodeClick(e);
        });

        document.addEventListener('mousemove', (e) => { STATE.mouseX = e.clientX; STATE.mouseY = e.clientY; });
        document.addEventListener('keydown', (e) => { if (e.key === 'Escape' && STATE.view === 'detail') closeDetail(); });
        window.addEventListener('resize', () => { positionNodes(); drawNetwork(); });
        window.onload = () => { nodes.forEach(node => createHexPrism(node)); positionNodes(); requestAnimationFrame(updateCursor); requestAnimationFrame(drawNetwork); };
    </script>
</body>
</html>
